<div class="container">
  <h1><%= @storage.name %></h1>
  <p>Type: <%= @storage.category %></p>

  <div class="wine-grid" style="display: grid; grid-template-columns: repeat(<%= @storage.cols %>, 1fr); gap: 10px;">

    <% (1..@storage.rows).each do |r| %>
      <% (1..@storage.cols).each do |c| %>

        <% wine = @wines.find { |w| w.row_position == r && w.col_position == c } %>

        <div class="grid-cell" style="border: 1px solid #ccc; min-height: 150px; display: flex; align-items: center; justify-content: center; background-color: #f9f9f9;">

          <% if wine %>
            <%= link_to storage_wine_path(@storage, wine), class: "wine-card" do %>
              <div class="wine-info text-center">
                <i class="fas fa-wine-bottle" style="font-size: 2rem; color: #800020;"></i>
                <p><strong><%= wine.name %></strong></p>
              </div>
            <% end %>
          <% else %>
            <%= link_to new_storage_wine_path(@storage, row: r, col: c), class: "add-wine-btn" do %>
              <i class="fas fa-plus-circle" style="font-size: 1.5rem; color: #bbb;"></i>
            <% end %>
          <% end %>

        </div>

      <% end %>
    <% end %>
  </div>

  <%= link_to 'Retour aux stockages', storages_path, class: "btn btn-secondary mt-4" %>
</div>
